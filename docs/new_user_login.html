<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>new_user_login – French with Kunal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./images/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4a99180f46f31fbf6e72317e3af0463c.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-c10d254adf1993520e01d496853de50c.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">French with Kunal</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About Us</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./contact.html"> 
<span class="menu-text">Contact Us</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-language" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Language</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-language">    
        <li>
    <a class="dropdown-item" href="https://frenchwithkunal.ca/index.html">
 <span class="dropdown-text">English</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://frenchwithkunal.ca/fr/index.html">
 <span class="dropdown-text">Français</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@kunalkhurana7822"> <i class="bi bi-youtube" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="new_user_login.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<div id="f157cd11" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install flask flask<span class="op">-</span>login flask<span class="op">-</span>sqlalchemy</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Requirement already satisfied: flask in c:\users\khura\anaconda3\lib\site-packages (3.1.0)
Requirement already satisfied: flask-login in c:\users\khura\anaconda3\lib\site-packages (0.6.3)
Requirement already satisfied: flask-sqlalchemy in c:\users\khura\anaconda3\lib\site-packages (3.1.1)
Requirement already satisfied: Werkzeug&gt;=3.1 in c:\users\khura\anaconda3\lib\site-packages (from flask) (3.1.3)
Requirement already satisfied: Jinja2&gt;=3.1.2 in c:\users\khura\anaconda3\lib\site-packages (from flask) (3.1.2)
Requirement already satisfied: itsdangerous&gt;=2.2 in c:\users\khura\anaconda3\lib\site-packages (from flask) (2.2.0)
Requirement already satisfied: click&gt;=8.1.3 in c:\users\khura\anaconda3\lib\site-packages (from flask) (8.1.8)
Requirement already satisfied: blinker&gt;=1.9 in c:\users\khura\anaconda3\lib\site-packages (from flask) (1.9.0)
Requirement already satisfied: sqlalchemy&gt;=2.0.16 in c:\users\khura\anaconda3\lib\site-packages (from flask-sqlalchemy) (2.0.37)
Requirement already satisfied: colorama in c:\users\khura\anaconda3\lib\site-packages (from click&gt;=8.1.3-&gt;flask) (0.4.6)
Requirement already satisfied: MarkupSafe&gt;=2.0 in c:\users\khura\anaconda3\lib\site-packages (from Jinja2&gt;=3.1.2-&gt;flask) (2.1.1)
Requirement already satisfied: greenlet!=0.4.17 in c:\users\khura\anaconda3\lib\site-packages (from sqlalchemy&gt;=2.0.16-&gt;flask-sqlalchemy) (2.0.1)
Requirement already satisfied: typing-extensions&gt;=4.6.0 in c:\users\khura\anaconda3\lib\site-packages (from sqlalchemy&gt;=2.0.16-&gt;flask-sqlalchemy) (4.12.2)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
[notice] A new release of pip is available: 24.3.1 -&gt; 25.0
[notice] To update, run: python.exe -m pip install --upgrade pip</code></pre>
</div>
</div>
<div id="ed9a528e" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> pip install flask_bcrypt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collecting flask_bcrypt
  Downloading Flask_Bcrypt-1.0.1-py3-none-any.whl.metadata (2.6 kB)
Requirement already satisfied: Flask in c:\users\khura\anaconda3\lib\site-packages (from flask_bcrypt) (3.1.0)
Requirement already satisfied: bcrypt&gt;=3.1.1 in c:\users\khura\anaconda3\lib\site-packages (from flask_bcrypt) (3.2.0)
Requirement already satisfied: cffi&gt;=1.1 in c:\users\khura\anaconda3\lib\site-packages (from bcrypt&gt;=3.1.1-&gt;flask_bcrypt) (1.15.1)
Requirement already satisfied: six&gt;=1.4.1 in c:\users\khura\anaconda3\lib\site-packages (from bcrypt&gt;=3.1.1-&gt;flask_bcrypt) (1.16.0)
Requirement already satisfied: Werkzeug&gt;=3.1 in c:\users\khura\anaconda3\lib\site-packages (from Flask-&gt;flask_bcrypt) (3.1.3)
Requirement already satisfied: Jinja2&gt;=3.1.2 in c:\users\khura\anaconda3\lib\site-packages (from Flask-&gt;flask_bcrypt) (3.1.2)
Requirement already satisfied: itsdangerous&gt;=2.2 in c:\users\khura\anaconda3\lib\site-packages (from Flask-&gt;flask_bcrypt) (2.2.0)
Requirement already satisfied: click&gt;=8.1.3 in c:\users\khura\anaconda3\lib\site-packages (from Flask-&gt;flask_bcrypt) (8.1.8)
Requirement already satisfied: blinker&gt;=1.9 in c:\users\khura\anaconda3\lib\site-packages (from Flask-&gt;flask_bcrypt) (1.9.0)
Requirement already satisfied: pycparser in c:\users\khura\anaconda3\lib\site-packages (from cffi&gt;=1.1-&gt;bcrypt&gt;=3.1.1-&gt;flask_bcrypt) (2.21)
Requirement already satisfied: colorama in c:\users\khura\anaconda3\lib\site-packages (from click&gt;=8.1.3-&gt;Flask-&gt;flask_bcrypt) (0.4.6)
Requirement already satisfied: MarkupSafe&gt;=2.0 in c:\users\khura\anaconda3\lib\site-packages (from Jinja2&gt;=3.1.2-&gt;Flask-&gt;flask_bcrypt) (2.1.1)
Downloading Flask_Bcrypt-1.0.1-py3-none-any.whl (6.0 kB)
Installing collected packages: flask_bcrypt
Successfully installed flask_bcrypt-1.0.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
[notice] A new release of pip is available: 24.3.1 -&gt; 25.0
[notice] To update, run: python.exe -m pip install --upgrade pip</code></pre>
</div>
</div>
<div id="b052a757" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> pip install pymysql</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collecting pymysql
  Downloading PyMySQL-1.1.1-py3-none-any.whl.metadata (4.4 kB)
Downloading PyMySQL-1.1.1-py3-none-any.whl (44 kB)
Installing collected packages: pymysql
Successfully installed pymysql-1.1.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
[notice] A new release of pip is available: 24.3.1 -&gt; 25.0
[notice] To update, run: python.exe -m pip install --upgrade pip</code></pre>
</div>
</div>
<div id="2bbab763" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>os.urandom(<span class="dv">24</span>).<span class="bu">hex</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</code></pre>
</div>
</div>
<div id="7ec868a3" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, render_template, request, redirect, url_for, flash</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_sqlalchemy <span class="im">import</span> SQLAlchemy</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_login <span class="im">import</span> LoginManager, UserMixin, login_user, login_required, logout_user, current_user</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_bcrypt <span class="im">import</span> Bcrypt</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> secrets</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>app.secret_key <span class="op">=</span> <span class="st">'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Database configuration</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_DATABASE_URI'</span>] <span class="op">=</span> <span class="st">'mysql+pymysql://my_user:password@localhost/my_database'</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> SQLAlchemy(app)</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>bcrypt <span class="op">=</span> Bcrypt(app)</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>login_manager <span class="op">=</span> LoginManager(app)</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>login_manager.login_view <span class="op">=</span> <span class="st">'login'</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co"># User model</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User(db.Model, UserMixin):</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span> <span class="op">=</span> db.Column(db.Integer, primary_key<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    email <span class="op">=</span> db.Column(db.String(<span class="dv">255</span>), unique<span class="op">=</span><span class="va">True</span>, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    password_hash <span class="op">=</span> db.Column(db.String(<span class="dv">255</span>), nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    email_verified <span class="op">=</span> db.Column(db.Boolean, default<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    verification_token <span class="op">=</span> db.Column(db.String(<span class="dv">255</span>))</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    created_at <span class="op">=</span> db.Column(db.TIMESTAMP, server_default<span class="op">=</span>db.func.current_timestamp())</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    updated_at <span class="op">=</span> db.Column(db.TIMESTAMP, server_default<span class="op">=</span>db.func.current_timestamp(), onupdate<span class="op">=</span>db.func.current_timestamp())</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    last_login <span class="op">=</span> db.Column(db.TIMESTAMP)</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    reset_token <span class="op">=</span> db.Column(db.String(<span class="dv">255</span>))</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    reset_token_expires <span class="op">=</span> db.Column(db.TIMESTAMP)</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    status <span class="op">=</span> db.Column(db.String(<span class="dv">50</span>), default<span class="op">=</span><span class="st">'active'</span>)</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> set_password(<span class="va">self</span>, password):</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.password_hash <span class="op">=</span> bcrypt.generate_password_hash(password).decode(<span class="st">'utf-8'</span>)</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> check_password(<span class="va">self</span>, password):</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> bcrypt.check_password_hash(<span class="va">self</span>.password_hash, password)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Load user for Flask-Login</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="at">@login_manager.user_loader</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_user(user_id):</span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> User.query.get(<span class="bu">int</span>(user_id))</span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Routes</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> home():</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> render_template(<span class="st">'home.html'</span>)</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/register'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> register():</span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>        email <span class="op">=</span> request.form.get(<span class="st">'email'</span>)</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>        password <span class="op">=</span> request.form.get(<span class="st">'password'</span>)</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if user already exists</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> User.query.filter_by(email<span class="op">=</span>email).first():</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>            flash(<span class="st">'Email already registered!'</span>, <span class="st">'danger'</span>)</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> redirect(url_for(<span class="st">'register'</span>))</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create new user</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>        new_user <span class="op">=</span> User(email<span class="op">=</span>email)</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>        new_user.set_password(password)</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>        new_user.verification_token <span class="op">=</span> secrets.token_urlsafe(<span class="dv">32</span>)  <span class="co"># Generate verification token</span></span>
<span id="cb12-64"><a href="#cb12-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-65"><a href="#cb12-65" aria-hidden="true" tabindex="-1"></a>        db.session.add(new_user)</span>
<span id="cb12-66"><a href="#cb12-66" aria-hidden="true" tabindex="-1"></a>        db.session.commit()</span>
<span id="cb12-67"><a href="#cb12-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-68"><a href="#cb12-68" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Send verification email (pseudo-code)</span></span>
<span id="cb12-69"><a href="#cb12-69" aria-hidden="true" tabindex="-1"></a>        send_verification_email(new_user.email, new_user.verification_token)</span>
<span id="cb12-70"><a href="#cb12-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-71"><a href="#cb12-71" aria-hidden="true" tabindex="-1"></a>        flash(<span class="st">'Registration successful! Please check your email to verify your account.'</span>, <span class="st">'success'</span>)</span>
<span id="cb12-72"><a href="#cb12-72" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> redirect(url_for(<span class="st">'login'</span>))</span>
<span id="cb12-73"><a href="#cb12-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-74"><a href="#cb12-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> render_template(<span class="st">'register.html'</span>)</span>
<span id="cb12-75"><a href="#cb12-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-76"><a href="#cb12-76" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/verify/&lt;token&gt;'</span>)</span>
<span id="cb12-77"><a href="#cb12-77" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> verify_email(token):</span>
<span id="cb12-78"><a href="#cb12-78" aria-hidden="true" tabindex="-1"></a>    user <span class="op">=</span> User.query.filter_by(verification_token<span class="op">=</span>token).first()</span>
<span id="cb12-79"><a href="#cb12-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-80"><a href="#cb12-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> user:</span>
<span id="cb12-81"><a href="#cb12-81" aria-hidden="true" tabindex="-1"></a>        user.email_verified <span class="op">=</span> <span class="va">True</span></span>
<span id="cb12-82"><a href="#cb12-82" aria-hidden="true" tabindex="-1"></a>        user.verification_token <span class="op">=</span> <span class="va">None</span>  <span class="co"># Clear the token after verification</span></span>
<span id="cb12-83"><a href="#cb12-83" aria-hidden="true" tabindex="-1"></a>        db.session.commit()</span>
<span id="cb12-84"><a href="#cb12-84" aria-hidden="true" tabindex="-1"></a>        flash(<span class="st">'Email verified successfully!'</span>, <span class="st">'success'</span>)</span>
<span id="cb12-85"><a href="#cb12-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-86"><a href="#cb12-86" aria-hidden="true" tabindex="-1"></a>        flash(<span class="st">'Invalid or expired token.'</span>, <span class="st">'danger'</span>)</span>
<span id="cb12-87"><a href="#cb12-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-88"><a href="#cb12-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect(url_for(<span class="st">'login'</span>))</span>
<span id="cb12-89"><a href="#cb12-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-90"><a href="#cb12-90" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/login'</span>, methods<span class="op">=</span>[<span class="st">'GET'</span>, <span class="st">'POST'</span>])</span>
<span id="cb12-91"><a href="#cb12-91" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> login():</span>
<span id="cb12-92"><a href="#cb12-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> request.method <span class="op">==</span> <span class="st">'POST'</span>:</span>
<span id="cb12-93"><a href="#cb12-93" aria-hidden="true" tabindex="-1"></a>        email <span class="op">=</span> request.form.get(<span class="st">'email'</span>)</span>
<span id="cb12-94"><a href="#cb12-94" aria-hidden="true" tabindex="-1"></a>        password <span class="op">=</span> request.form.get(<span class="st">'password'</span>)</span>
<span id="cb12-95"><a href="#cb12-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-96"><a href="#cb12-96" aria-hidden="true" tabindex="-1"></a>        user <span class="op">=</span> User.query.filter_by(email<span class="op">=</span>email).first()</span>
<span id="cb12-97"><a href="#cb12-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-98"><a href="#cb12-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> user <span class="kw">and</span> user.check_password(password):</span>
<span id="cb12-99"><a href="#cb12-99" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> user.email_verified:</span>
<span id="cb12-100"><a href="#cb12-100" aria-hidden="true" tabindex="-1"></a>                login_user(user)</span>
<span id="cb12-101"><a href="#cb12-101" aria-hidden="true" tabindex="-1"></a>                user.last_login <span class="op">=</span> db.func.current_timestamp()  <span class="co"># Update last login time</span></span>
<span id="cb12-102"><a href="#cb12-102" aria-hidden="true" tabindex="-1"></a>                db.session.commit()</span>
<span id="cb12-103"><a href="#cb12-103" aria-hidden="true" tabindex="-1"></a>                flash(<span class="st">'Login successful!'</span>, <span class="st">'success'</span>)</span>
<span id="cb12-104"><a href="#cb12-104" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> redirect(url_for(<span class="st">'dashboard'</span>))</span>
<span id="cb12-105"><a href="#cb12-105" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb12-106"><a href="#cb12-106" aria-hidden="true" tabindex="-1"></a>                flash(<span class="st">'Please verify your email before logging in.'</span>, <span class="st">'warning'</span>)</span>
<span id="cb12-107"><a href="#cb12-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb12-108"><a href="#cb12-108" aria-hidden="true" tabindex="-1"></a>            flash(<span class="st">'Invalid email or password.'</span>, <span class="st">'danger'</span>)</span>
<span id="cb12-109"><a href="#cb12-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-110"><a href="#cb12-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> render_template(<span class="st">'login.html'</span>)</span>
<span id="cb12-111"><a href="#cb12-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-112"><a href="#cb12-112" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/dashboard'</span>)</span>
<span id="cb12-113"><a href="#cb12-113" aria-hidden="true" tabindex="-1"></a><span class="at">@login_required</span></span>
<span id="cb12-114"><a href="#cb12-114" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dashboard():</span>
<span id="cb12-115"><a href="#cb12-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> render_template(<span class="st">'dashboard.html'</span>, user<span class="op">=</span>current_user)</span>
<span id="cb12-116"><a href="#cb12-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-117"><a href="#cb12-117" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/logout'</span>)</span>
<span id="cb12-118"><a href="#cb12-118" aria-hidden="true" tabindex="-1"></a><span class="at">@login_required</span></span>
<span id="cb12-119"><a href="#cb12-119" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> logout():</span>
<span id="cb12-120"><a href="#cb12-120" aria-hidden="true" tabindex="-1"></a>    logout_user()</span>
<span id="cb12-121"><a href="#cb12-121" aria-hidden="true" tabindex="-1"></a>    flash(<span class="st">'You have been logged out.'</span>, <span class="st">'success'</span>)</span>
<span id="cb12-122"><a href="#cb12-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> redirect(url_for(<span class="st">'home'</span>))</span>
<span id="cb12-123"><a href="#cb12-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-124"><a href="#cb12-124" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper function to send verification email (pseudo-code)</span></span>
<span id="cb12-125"><a href="#cb12-125" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> send_verification_email(email, token):</span>
<span id="cb12-126"><a href="#cb12-126" aria-hidden="true" tabindex="-1"></a>    verification_link <span class="op">=</span> <span class="ss">f"http://localhost:5000/verify/</span><span class="sc">{</span>token<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb12-127"><a href="#cb12-127" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Sending verification email to </span><span class="sc">{</span>email<span class="sc">}</span><span class="ss"> with link: </span><span class="sc">{</span>verification_link<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-128"><a href="#cb12-128" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Use a library like Flask-Mail to send the actual email</span></span>
<span id="cb12-129"><a href="#cb12-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-130"><a href="#cb12-130" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb12-131"><a href="#cb12-131" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb12-132"><a href="#cb12-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> app.app_context():</span>
<span id="cb12-133"><a href="#cb12-133" aria-hidden="true" tabindex="-1"></a>        db.create_all()  <span class="co"># Create database tables</span></span>
<span id="cb12-134"><a href="#cb12-134" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">OperationalError</span>                          Traceback (most recent call last)
File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:146</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg ansi-bold">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-fg">    145</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dbapi_connection <span style="color:rgb(98,98,98)">=</span> engine<span style="color:rgb(98,98,98)">.</span>raw_connection()
<span class="ansi-green-fg">    147</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> dialect<span style="color:rgb(98,98,98)">.</span>loaded_dbapi<span style="color:rgb(98,98,98)">.</span>Error <span style="font-weight:bold;color:rgb(0,135,0)">as</span> err:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:3298</span>, in <span class="ansi-cyan-fg">Engine.raw_connection</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">   3277</span> <span style="font-style:italic;color:rgb(175,0,0)">"""Return a "raw" DBAPI connection from the connection pool.</span>
<span class="ansi-green-fg">   3278</span> 
<span class="ansi-green-fg">   3279</span> <span style="font-style:italic;color:rgb(175,0,0)">The returned object is a proxied version of the DBAPI</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   3296</span> 
<span class="ansi-green-fg">   3297</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg ansi-bold">-&gt; 3298</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>pool<span style="color:rgb(98,98,98)">.</span>connect()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:449</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    442</span> <span style="font-style:italic;color:rgb(175,0,0)">"""Return a DBAPI connection from the pool.</span>
<span class="ansi-green-fg">    443</span> 
<span class="ansi-green-fg">    444</span> <span style="font-style:italic;color:rgb(175,0,0)">The connection is instrumented such that when its</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    447</span> 
<span class="ansi-green-fg">    448</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 449</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _ConnectionFairy<span style="color:rgb(98,98,98)">.</span>_checkout(<span style="color:rgb(0,135,0)">self</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:1263</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg ansi-bold">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-fg">   1262</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> fairy:
<span class="ansi-green-fg ansi-bold">-&gt; 1263</span>     fairy <span style="color:rgb(98,98,98)">=</span> _ConnectionRecord<span style="color:rgb(98,98,98)">.</span>checkout(pool)
<span class="ansi-green-fg">   1265</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> threadconns <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:712</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg ansi-bold">(cls, pool)</span>
<span class="ansi-green-fg">    711</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 712</span>     rec <span style="color:rgb(98,98,98)">=</span> pool<span style="color:rgb(98,98,98)">.</span>_do_get()
<span class="ansi-green-fg">    714</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\impl.py:179</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    178</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 179</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> util<span style="color:rgb(98,98,98)">.</span>safe_reraise():
<span class="ansi-green-fg">    180</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dec_overflow()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\util\langhelpers.py:146</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg ansi-bold">(self, type_, value, traceback)</span>
<span class="ansi-green-fg">    145</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> exc_value<span style="color:rgb(98,98,98)">.</span>with_traceback(exc_tb)
<span class="ansi-green-fg">    147</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\impl.py:177</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    176</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 177</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_create_connection()
<span class="ansi-green-fg">    178</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:390</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    388</span> <span style="font-style:italic;color:rgb(175,0,0)">"""Called by subclasses to create a new ConnectionRecord."""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 390</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _ConnectionRecord(<span style="color:rgb(0,135,0)">self</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:674</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg ansi-bold">(self, pool, connect)</span>
<span class="ansi-green-fg">    673</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> connect:
<span class="ansi-green-fg ansi-bold">--&gt; 674</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>__connect()
<span class="ansi-green-fg">    675</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>finalize_callback <span style="color:rgb(98,98,98)">=</span> deque()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:900</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    899</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg ansi-bold">--&gt; 900</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> util<span style="color:rgb(98,98,98)">.</span>safe_reraise():
<span class="ansi-green-fg">    901</span>         pool<span style="color:rgb(98,98,98)">.</span>logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Error on connect(): </span><span style="font-weight:bold;color:rgb(175,95,135)">%s</span><span style="color:rgb(175,0,0)">"</span>, e)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\util\langhelpers.py:146</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg ansi-bold">(self, type_, value, traceback)</span>
<span class="ansi-green-fg">    145</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> exc_value<span style="color:rgb(98,98,98)">.</span>with_traceback(exc_tb)
<span class="ansi-green-fg">    147</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:896</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    895</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>starttime <span style="color:rgb(98,98,98)">=</span> time<span style="color:rgb(98,98,98)">.</span>time()
<span class="ansi-green-fg ansi-bold">--&gt; 896</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>dbapi_connection <span style="color:rgb(98,98,98)">=</span> connection <span style="color:rgb(98,98,98)">=</span> pool<span style="color:rgb(98,98,98)">.</span>_invoke_creator(<span style="color:rgb(0,135,0)">self</span>)
<span class="ansi-green-fg">    897</span> pool<span style="color:rgb(98,98,98)">.</span>logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Created new connection </span><span style="font-weight:bold;color:rgb(175,95,135)">%r</span><span style="color:rgb(175,0,0)">"</span>, connection)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\create.py:646</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg ansi-bold">(connection_record)</span>
<span class="ansi-green-fg">    644</span>             <span style="font-weight:bold;color:rgb(0,135,0)">return</span> connection
<span class="ansi-green-fg ansi-bold">--&gt; 646</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> dialect<span style="color:rgb(98,98,98)">.</span>connect(<span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\default.py:622</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg ansi-bold">(self, *cargs, **cparams)</span>
<span class="ansi-green-fg">    620</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">connect</span>(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams):
<span class="ansi-green-fg">    621</span>     <span style="font-style:italic;color:rgb(95,135,135)"># inherits the docstring from interfaces.Dialect.connect</span>
<span class="ansi-green-fg ansi-bold">--&gt; 622</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>loaded_dbapi<span style="color:rgb(98,98,98)">.</span>connect(<span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:361</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg ansi-bold">(self, user, password, host, database, unix_socket, port, charset, collation, sql_mode, read_default_file, conv, use_unicode, client_flag, cursorclass, init_command, connect_timeout, read_default_group, autocommit, local_infile, max_allowed_packet, defer_connect, auth_plugin_map, read_timeout, write_timeout, bind_address, binary_prefix, program_name, server_public_key, ssl, ssl_ca, ssl_cert, ssl_disabled, ssl_key, ssl_key_password, ssl_verify_cert, ssl_verify_identity, compress, named_pipe, passwd, db)</span>
<span class="ansi-green-fg">    360</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 361</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>connect()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:669</span>, in <span class="ansi-cyan-fg">Connection.connect</span><span class="ansi-blue-fg ansi-bold">(self, sock)</span>
<span class="ansi-green-fg">    668</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_get_server_information()
<span class="ansi-green-fg ansi-bold">--&gt; 669</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_request_authentication()
<span class="ansi-green-fg">    671</span> <span style="font-style:italic;color:rgb(95,135,135)"># Send "SET NAMES" query on init for:</span>
<span class="ansi-green-fg">    672</span> <span style="font-style:italic;color:rgb(95,135,135)"># - Ensure charaset (and collation) is set to the server.</span>
<span class="ansi-green-fg">    673</span> <span style="font-style:italic;color:rgb(95,135,135)">#   - collation_id in handshake packet may be ignored.</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    682</span> <span style="font-style:italic;color:rgb(95,135,135)"># - https://github.com/wagtail/wagtail/issues/9477</span>
<span class="ansi-green-fg">    683</span> <span style="font-style:italic;color:rgb(95,135,135)"># - https://zenn.dev/methane/articles/2023-mysql-collation (Japanese)</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:957</span>, in <span class="ansi-cyan-fg">Connection._request_authentication</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    956</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>write_packet(data)
<span class="ansi-green-fg ansi-bold">--&gt; 957</span> auth_packet <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_read_packet()
<span class="ansi-green-fg">    959</span> <span style="font-style:italic;color:rgb(95,135,135)"># if authentication method isn't accepted the first byte</span>
<span class="ansi-green-fg">    960</span> <span style="font-style:italic;color:rgb(95,135,135)"># will have the octet 254</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:775</span>, in <span class="ansi-cyan-fg">Connection._read_packet</span><span class="ansi-blue-fg ansi-bold">(self, packet_type)</span>
<span class="ansi-green-fg">    774</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_result<span style="color:rgb(98,98,98)">.</span>unbuffered_active <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">False</span>
<span class="ansi-green-fg ansi-bold">--&gt; 775</span>     packet<span style="color:rgb(98,98,98)">.</span>raise_for_error()
<span class="ansi-green-fg">    776</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> packet

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\protocol.py:219</span>, in <span class="ansi-cyan-fg">MysqlPacket.raise_for_error</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    218</span>     <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">errno =</span><span style="color:rgb(175,0,0)">"</span>, errno)
<span class="ansi-green-fg ansi-bold">--&gt; 219</span> err<span style="color:rgb(98,98,98)">.</span>raise_mysql_exception(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_data)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\err.py:150</span>, in <span class="ansi-cyan-fg">raise_mysql_exception</span><span class="ansi-blue-fg ansi-bold">(data)</span>
<span class="ansi-green-fg">    149</span>     errorclass <span style="color:rgb(98,98,98)">=</span> InternalError <span style="font-weight:bold;color:rgb(0,135,0)">if</span> errno <span style="color:rgb(98,98,98)">&lt;</span> <span style="color:rgb(98,98,98)">1000</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span> OperationalError
<span class="ansi-green-fg ansi-bold">--&gt; 150</span> <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> errorclass(errno, errval)

<span class="ansi-red-fg ansi-bold">OperationalError</span>: (1045, "Access denied for user 'my_user'@'localhost' (using password: YES)")

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg ansi-bold">OperationalError</span>                          Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[6], line 133</span>
<span class="ansi-green-fg">    131</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,0,135)">__name__</span> <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">__main__</span><span style="color:rgb(175,0,0)">'</span>:
<span class="ansi-green-fg">    132</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> app<span style="color:rgb(98,98,98)">.</span>app_context():
<span class="ansi-green-fg ansi-bold">--&gt; 133</span>         db<span style="color:rgb(98,98,98)">.</span>create_all()  <span style="font-style:italic;color:rgb(95,135,135)"># Create database tables</span>
<span class="ansi-green-fg">    134</span>     app<span style="color:rgb(98,98,98)">.</span>run(debug<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">True</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\flask_sqlalchemy\extension.py:900</span>, in <span class="ansi-cyan-fg">SQLAlchemy.create_all</span><span class="ansi-blue-fg ansi-bold">(self, bind_key)</span>
<span class="ansi-green-fg">    883</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">create_all</span>(<span style="color:rgb(0,135,0)">self</span>, bind_key: <span style="color:rgb(0,135,0)">str</span> <span style="color:rgb(98,98,98)">|</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="color:rgb(98,98,98)">|</span> <span style="color:rgb(0,135,0)">list</span>[<span style="color:rgb(0,135,0)">str</span> <span style="color:rgb(98,98,98)">|</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>] <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">__all__</span><span style="color:rgb(175,0,0)">"</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    884</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Create tables that do not exist in the database by calling</span>
<span class="ansi-green-fg">    885</span> <span style="font-style:italic;color:rgb(175,0,0)">    ``metadata.create_all()`` for all or some bind keys. This does not</span>
<span class="ansi-green-fg">    886</span> <span style="font-style:italic;color:rgb(175,0,0)">    update existing tables, use a migration library for that.</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    898</span> <span style="font-style:italic;color:rgb(175,0,0)">        Added the ``bind`` and ``app`` parameters.</span>
<span class="ansi-green-fg">    899</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">--&gt; 900</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_call_for_binds(bind_key, <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">create_all</span><span style="color:rgb(175,0,0)">"</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\flask_sqlalchemy\extension.py:881</span>, in <span class="ansi-cyan-fg">SQLAlchemy._call_for_binds</span><span class="ansi-blue-fg ansi-bold">(self, bind_key, op_name)</span>
<span class="ansi-green-fg">    878</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> sa_exc<span style="color:rgb(98,98,98)">.</span>UnboundExecutionError(message) <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    880</span> metadata <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>metadatas[key]
<span class="ansi-green-fg ansi-bold">--&gt; 881</span> <span style="color:rgb(0,135,0)">getattr</span>(metadata, op_name)(bind<span style="color:rgb(98,98,98)">=</span>engine)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\sql\schema.py:5900</span>, in <span class="ansi-cyan-fg">MetaData.create_all</span><span class="ansi-blue-fg ansi-bold">(self, bind, tables, checkfirst)</span>
<span class="ansi-green-fg">   5876</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">create_all</span>(
<span class="ansi-green-fg">   5877</span>     <span style="color:rgb(0,135,0)">self</span>,
<span class="ansi-green-fg">   5878</span>     bind: _CreateDropBind,
<span class="ansi-green-fg">   5879</span>     tables: Optional[_typing_Sequence[Table]] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg">   5880</span>     checkfirst: <span style="color:rgb(0,135,0)">bool</span> <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>,
<span class="ansi-green-fg">   5881</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">   5882</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Create all tables stored in this metadata.</span>
<span class="ansi-green-fg">   5883</span> 
<span class="ansi-green-fg">   5884</span> <span style="font-style:italic;color:rgb(175,0,0)">    Conditional by default, will not attempt to recreate tables already</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   5898</span> 
<span class="ansi-green-fg">   5899</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">-&gt; 5900</span>     bind<span style="color:rgb(98,98,98)">.</span>_run_ddl_visitor(
<span class="ansi-green-fg">   5901</span>         ddl<span style="color:rgb(98,98,98)">.</span>SchemaGenerator, <span style="color:rgb(0,135,0)">self</span>, checkfirst<span style="color:rgb(98,98,98)">=</span>checkfirst, tables<span style="color:rgb(98,98,98)">=</span>tables
<span class="ansi-green-fg">   5902</span>     )

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:3248</span>, in <span class="ansi-cyan-fg">Engine._run_ddl_visitor</span><span class="ansi-blue-fg ansi-bold">(self, visitorcallable, element, **kwargs)</span>
<span class="ansi-green-fg">   3242</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">_run_ddl_visitor</span>(
<span class="ansi-green-fg">   3243</span>     <span style="color:rgb(0,135,0)">self</span>,
<span class="ansi-green-fg">   3244</span>     visitorcallable: Type[Union[SchemaGenerator, SchemaDropper]],
<span class="ansi-green-fg">   3245</span>     element: SchemaItem,
<span class="ansi-green-fg">   3246</span>     <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs: Any,
<span class="ansi-green-fg">   3247</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg ansi-bold">-&gt; 3248</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>begin() <span style="font-weight:bold;color:rgb(0,135,0)">as</span> conn:
<span class="ansi-green-fg">   3249</span>         conn<span style="color:rgb(98,98,98)">.</span>_run_ddl_visitor(visitorcallable, element, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>kwargs)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\contextlib.py:137</span>, in <span class="ansi-cyan-fg">_GeneratorContextManager.__enter__</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    135</span> <span style="font-weight:bold;color:rgb(0,135,0)">del</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>args, <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>kwds, <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>func
<span class="ansi-green-fg">    136</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 137</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">next</span>(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>gen)
<span class="ansi-green-fg">    138</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">StopIteration</span>:
<span class="ansi-green-fg">    139</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> <span style="font-weight:bold;color:rgb(215,95,95)">RuntimeError</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">generator didn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t yield</span><span style="color:rgb(175,0,0)">"</span>) <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:3238</span>, in <span class="ansi-cyan-fg">Engine.begin</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">   3213</span> <span style="color:rgb(175,0,255)">@contextlib</span><span style="color:rgb(98,98,98)">.</span>contextmanager
<span class="ansi-green-fg">   3214</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">begin</span>(<span style="color:rgb(0,135,0)">self</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> Iterator[Connection]:
<span class="ansi-green-fg">   3215</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Return a context manager delivering a :class:`_engine.Connection`</span>
<span class="ansi-green-fg">   3216</span> <span style="font-style:italic;color:rgb(175,0,0)">    with a :class:`.Transaction` established.</span>
<span class="ansi-green-fg">   3217</span> 
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   3236</span> 
<span class="ansi-green-fg">   3237</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>  <span style="font-style:italic;color:rgb(95,135,135)"># noqa: E501</span>
<span class="ansi-green-fg ansi-bold">-&gt; 3238</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>connect() <span style="font-weight:bold;color:rgb(0,135,0)">as</span> conn:
<span class="ansi-green-fg">   3239</span>         <span style="font-weight:bold;color:rgb(0,135,0)">with</span> conn<span style="color:rgb(98,98,98)">.</span>begin():
<span class="ansi-green-fg">   3240</span>             <span style="font-weight:bold;color:rgb(0,135,0)">yield</span> conn

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:3274</span>, in <span class="ansi-cyan-fg">Engine.connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">   3251</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">connect</span>(<span style="color:rgb(0,135,0)">self</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> Connection:
<span class="ansi-green-fg">   3252</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Return a new :class:`_engine.Connection` object.</span>
<span class="ansi-green-fg">   3253</span> 
<span class="ansi-green-fg">   3254</span> <span style="font-style:italic;color:rgb(175,0,0)">    The :class:`_engine.Connection` acts as a Python context manager, so</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   3271</span> 
<span class="ansi-green-fg">   3272</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">-&gt; 3274</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_connection_cls(<span style="color:rgb(0,135,0)">self</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:148</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg ansi-bold">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-fg">    146</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dbapi_connection <span style="color:rgb(98,98,98)">=</span> engine<span style="color:rgb(98,98,98)">.</span>raw_connection()
<span class="ansi-green-fg">    147</span>     <span style="font-weight:bold;color:rgb(0,135,0)">except</span> dialect<span style="color:rgb(98,98,98)">.</span>loaded_dbapi<span style="color:rgb(98,98,98)">.</span>Error <span style="font-weight:bold;color:rgb(0,135,0)">as</span> err:
<span class="ansi-green-fg ansi-bold">--&gt; 148</span>         Connection<span style="color:rgb(98,98,98)">.</span>_handle_dbapi_exception_noconnection(
<span class="ansi-green-fg">    149</span>             err, dialect, engine
<span class="ansi-green-fg">    150</span>         )
<span class="ansi-green-fg">    151</span>         <span style="font-weight:bold;color:rgb(0,135,0)">raise</span>
<span class="ansi-green-fg">    152</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:2439</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception_noconnection</span><span class="ansi-blue-fg ansi-bold">(cls, e, dialect, engine, is_disconnect, invalidate_pool_on_disconnect, is_pre_ping)</span>
<span class="ansi-green-fg">   2437</span> <span style="font-weight:bold;color:rgb(0,135,0)">elif</span> should_wrap:
<span class="ansi-green-fg">   2438</span>     <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> sqlalchemy_exception <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg ansi-bold">-&gt; 2439</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> sqlalchemy_exception<span style="color:rgb(98,98,98)">.</span>with_traceback(exc_info[<span style="color:rgb(98,98,98)">2</span>]) <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">e</span>
<span class="ansi-green-fg">   2440</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">   2441</span>     <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> exc_info[<span style="color:rgb(98,98,98)">1</span>] <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:146</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg ansi-bold">(self, engine, connection, _has_events, _allow_revalidate, _allow_autobegin)</span>
<span class="ansi-green-fg">    144</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> connection <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    145</span>     <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dbapi_connection <span style="color:rgb(98,98,98)">=</span> engine<span style="color:rgb(98,98,98)">.</span>raw_connection()
<span class="ansi-green-fg">    147</span>     <span style="font-weight:bold;color:rgb(0,135,0)">except</span> dialect<span style="color:rgb(98,98,98)">.</span>loaded_dbapi<span style="color:rgb(98,98,98)">.</span>Error <span style="font-weight:bold;color:rgb(0,135,0)">as</span> err:
<span class="ansi-green-fg">    148</span>         Connection<span style="color:rgb(98,98,98)">.</span>_handle_dbapi_exception_noconnection(
<span class="ansi-green-fg">    149</span>             err, dialect, engine
<span class="ansi-green-fg">    150</span>         )

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\base.py:3298</span>, in <span class="ansi-cyan-fg">Engine.raw_connection</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">   3276</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">raw_connection</span>(<span style="color:rgb(0,135,0)">self</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> PoolProxiedConnection:
<span class="ansi-green-fg">   3277</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Return a "raw" DBAPI connection from the connection pool.</span>
<span class="ansi-green-fg">   3278</span> 
<span class="ansi-green-fg">   3279</span> <span style="font-style:italic;color:rgb(175,0,0)">    The returned object is a proxied version of the DBAPI</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   3296</span> 
<span class="ansi-green-fg">   3297</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">-&gt; 3298</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>pool<span style="color:rgb(98,98,98)">.</span>connect()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:449</span>, in <span class="ansi-cyan-fg">Pool.connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    441</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">connect</span>(<span style="color:rgb(0,135,0)">self</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> PoolProxiedConnection:
<span class="ansi-green-fg">    442</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Return a DBAPI connection from the pool.</span>
<span class="ansi-green-fg">    443</span> 
<span class="ansi-green-fg">    444</span> <span style="font-style:italic;color:rgb(175,0,0)">    The connection is instrumented such that when its</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    447</span> 
<span class="ansi-green-fg">    448</span> <span style="font-style:italic;color:rgb(175,0,0)">    """</span>
<span class="ansi-green-fg ansi-bold">--&gt; 449</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _ConnectionFairy<span style="color:rgb(98,98,98)">.</span>_checkout(<span style="color:rgb(0,135,0)">self</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:1263</span>, in <span class="ansi-cyan-fg">_ConnectionFairy._checkout</span><span class="ansi-blue-fg ansi-bold">(cls, pool, threadconns, fairy)</span>
<span class="ansi-green-fg">   1255</span> <span style="color:rgb(175,0,255)">@classmethod</span>
<span class="ansi-green-fg">   1256</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">_checkout</span>(
<span class="ansi-green-fg">   1257</span>     <span style="color:rgb(0,135,0)">cls</span>,
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">   1260</span>     fairy: Optional[_ConnectionFairy] <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>,
<span class="ansi-green-fg">   1261</span> ) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> _ConnectionFairy:
<span class="ansi-green-fg">   1262</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> fairy:
<span class="ansi-green-fg ansi-bold">-&gt; 1263</span>         fairy <span style="color:rgb(98,98,98)">=</span> _ConnectionRecord<span style="color:rgb(98,98,98)">.</span>checkout(pool)
<span class="ansi-green-fg">   1265</span>         <span style="font-weight:bold;color:rgb(0,135,0)">if</span> threadconns <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">   1266</span>             threadconns<span style="color:rgb(98,98,98)">.</span>current <span style="color:rgb(98,98,98)">=</span> weakref<span style="color:rgb(98,98,98)">.</span>ref(fairy)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:712</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.checkout</span><span class="ansi-blue-fg ansi-bold">(cls, pool)</span>
<span class="ansi-green-fg">    710</span>     rec <span style="color:rgb(98,98,98)">=</span> cast(_ConnectionRecord, pool<span style="color:rgb(98,98,98)">.</span>_do_get())
<span class="ansi-green-fg">    711</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 712</span>     rec <span style="color:rgb(98,98,98)">=</span> pool<span style="color:rgb(98,98,98)">.</span>_do_get()
<span class="ansi-green-fg">    714</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    715</span>     dbapi_connection <span style="color:rgb(98,98,98)">=</span> rec<span style="color:rgb(98,98,98)">.</span>get_connection()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\impl.py:179</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    177</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_create_connection()
<span class="ansi-green-fg">    178</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 179</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> util<span style="color:rgb(98,98,98)">.</span>safe_reraise():
<span class="ansi-green-fg">    180</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_dec_overflow()
<span class="ansi-green-fg">    181</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\util\langhelpers.py:146</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg ansi-bold">(self, type_, value, traceback)</span>
<span class="ansi-green-fg">    144</span>     <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> exc_value <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    145</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> exc_value<span style="color:rgb(98,98,98)">.</span>with_traceback(exc_tb)
<span class="ansi-green-fg">    147</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    148</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\impl.py:177</span>, in <span class="ansi-cyan-fg">QueuePool._do_get</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    175</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_inc_overflow():
<span class="ansi-green-fg">    176</span>     <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 177</span>         <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_create_connection()
<span class="ansi-green-fg">    178</span>     <span style="font-weight:bold;color:rgb(0,135,0)">except</span>:
<span class="ansi-green-fg">    179</span>         <span style="font-weight:bold;color:rgb(0,135,0)">with</span> util<span style="color:rgb(98,98,98)">.</span>safe_reraise():

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:390</span>, in <span class="ansi-cyan-fg">Pool._create_connection</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    387</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">_create_connection</span>(<span style="color:rgb(0,135,0)">self</span>) <span style="color:rgb(98,98,98)">-</span><span style="color:rgb(98,98,98)">&gt;</span> ConnectionPoolEntry:
<span class="ansi-green-fg">    388</span> <span style="color:rgb(188,188,188)">    </span><span style="font-style:italic;color:rgb(175,0,0)">"""Called by subclasses to create a new ConnectionRecord."""</span>
<span class="ansi-green-fg ansi-bold">--&gt; 390</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> _ConnectionRecord(<span style="color:rgb(0,135,0)">self</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:674</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__init__</span><span class="ansi-blue-fg ansi-bold">(self, pool, connect)</span>
<span class="ansi-green-fg">    672</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>__pool <span style="color:rgb(98,98,98)">=</span> pool
<span class="ansi-green-fg">    673</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> connect:
<span class="ansi-green-fg ansi-bold">--&gt; 674</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>__connect()
<span class="ansi-green-fg">    675</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>finalize_callback <span style="color:rgb(98,98,98)">=</span> deque()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:900</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    898</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>fresh <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg">    899</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">BaseException</span> <span style="font-weight:bold;color:rgb(0,135,0)">as</span> e:
<span class="ansi-green-fg ansi-bold">--&gt; 900</span>     <span style="font-weight:bold;color:rgb(0,135,0)">with</span> util<span style="color:rgb(98,98,98)">.</span>safe_reraise():
<span class="ansi-green-fg">    901</span>         pool<span style="color:rgb(98,98,98)">.</span>logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Error on connect(): </span><span style="font-weight:bold;color:rgb(175,95,135)">%s</span><span style="color:rgb(175,0,0)">"</span>, e)
<span class="ansi-green-fg">    902</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    903</span>     <span style="font-style:italic;color:rgb(95,135,135)"># in SQLAlchemy 1.4 the first_connect event is not used by</span>
<span class="ansi-green-fg">    904</span>     <span style="font-style:italic;color:rgb(95,135,135)"># the engine, so this will usually not be set</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\util\langhelpers.py:146</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg ansi-bold">(self, type_, value, traceback)</span>
<span class="ansi-green-fg">    144</span>     <span style="font-weight:bold;color:rgb(0,135,0)">assert</span> exc_value <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    145</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>
<span class="ansi-green-fg ansi-bold">--&gt; 146</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> exc_value<span style="color:rgb(98,98,98)">.</span>with_traceback(exc_tb)
<span class="ansi-green-fg">    147</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg">    148</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_exc_info <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>  <span style="font-style:italic;color:rgb(95,135,135)"># remove potential circular references</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\pool\base.py:896</span>, in <span class="ansi-cyan-fg">_ConnectionRecord.__connect</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    894</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg">    895</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>starttime <span style="color:rgb(98,98,98)">=</span> time<span style="color:rgb(98,98,98)">.</span>time()
<span class="ansi-green-fg ansi-bold">--&gt; 896</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>dbapi_connection <span style="color:rgb(98,98,98)">=</span> connection <span style="color:rgb(98,98,98)">=</span> pool<span style="color:rgb(98,98,98)">.</span>_invoke_creator(<span style="color:rgb(0,135,0)">self</span>)
<span class="ansi-green-fg">    897</span>     pool<span style="color:rgb(98,98,98)">.</span>logger<span style="color:rgb(98,98,98)">.</span>debug(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Created new connection </span><span style="font-weight:bold;color:rgb(175,95,135)">%r</span><span style="color:rgb(175,0,0)">"</span>, connection)
<span class="ansi-green-fg">    898</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>fresh <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\create.py:646</span>, in <span class="ansi-cyan-fg">create_engine.&lt;locals&gt;.connect</span><span class="ansi-blue-fg ansi-bold">(connection_record)</span>
<span class="ansi-green-fg">    643</span>         <span style="font-weight:bold;color:rgb(0,135,0)">if</span> connection <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    644</span>             <span style="font-weight:bold;color:rgb(0,135,0)">return</span> connection
<span class="ansi-green-fg ansi-bold">--&gt; 646</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> dialect<span style="color:rgb(98,98,98)">.</span>connect(<span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\sqlalchemy\engine\default.py:622</span>, in <span class="ansi-cyan-fg">DefaultDialect.connect</span><span class="ansi-blue-fg ansi-bold">(self, *cargs, **cparams)</span>
<span class="ansi-green-fg">    620</span> <span style="font-weight:bold;color:rgb(0,135,0)">def</span> <span style="color:rgb(0,0,255)">connect</span>(<span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams):
<span class="ansi-green-fg">    621</span>     <span style="font-style:italic;color:rgb(95,135,135)"># inherits the docstring from interfaces.Dialect.connect</span>
<span class="ansi-green-fg ansi-bold">--&gt; 622</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>loaded_dbapi<span style="color:rgb(98,98,98)">.</span>connect(<span style="color:rgb(98,98,98)">*</span>cargs, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>cparams)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:361</span>, in <span class="ansi-cyan-fg">Connection.__init__</span><span class="ansi-blue-fg ansi-bold">(self, user, password, host, database, unix_socket, port, charset, collation, sql_mode, read_default_file, conv, use_unicode, client_flag, cursorclass, init_command, connect_timeout, read_default_group, autocommit, local_infile, max_allowed_packet, defer_connect, auth_plugin_map, read_timeout, write_timeout, bind_address, binary_prefix, program_name, server_public_key, ssl, ssl_ca, ssl_cert, ssl_disabled, ssl_key, ssl_key_password, ssl_verify_cert, ssl_verify_identity, compress, named_pipe, passwd, db)</span>
<span class="ansi-green-fg">    359</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_sock <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>
<span class="ansi-green-fg">    360</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 361</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>connect()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:669</span>, in <span class="ansi-cyan-fg">Connection.connect</span><span class="ansi-blue-fg ansi-bold">(self, sock)</span>
<span class="ansi-green-fg">    666</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_next_seq_id <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(98,98,98)">0</span>
<span class="ansi-green-fg">    668</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_get_server_information()
<span class="ansi-green-fg ansi-bold">--&gt; 669</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_request_authentication()
<span class="ansi-green-fg">    671</span> <span style="font-style:italic;color:rgb(95,135,135)"># Send "SET NAMES" query on init for:</span>
<span class="ansi-green-fg">    672</span> <span style="font-style:italic;color:rgb(95,135,135)"># - Ensure charaset (and collation) is set to the server.</span>
<span class="ansi-green-fg">    673</span> <span style="font-style:italic;color:rgb(95,135,135)">#   - collation_id in handshake packet may be ignored.</span>
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    682</span> <span style="font-style:italic;color:rgb(95,135,135)"># - https://github.com/wagtail/wagtail/issues/9477</span>
<span class="ansi-green-fg">    683</span> <span style="font-style:italic;color:rgb(95,135,135)"># - https://zenn.dev/methane/articles/2023-mysql-collation (Japanese)</span>
<span class="ansi-green-fg">    684</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>set_character_set(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>charset, <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>collation)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:957</span>, in <span class="ansi-cyan-fg">Connection._request_authentication</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    954</span>     data <span style="color:rgb(98,98,98)">+</span><span style="color:rgb(98,98,98)">=</span> _lenenc_int(<span style="color:rgb(0,135,0)">len</span>(connect_attrs)) <span style="color:rgb(98,98,98)">+</span> connect_attrs
<span class="ansi-green-fg">    956</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>write_packet(data)
<span class="ansi-green-fg ansi-bold">--&gt; 957</span> auth_packet <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_read_packet()
<span class="ansi-green-fg">    959</span> <span style="font-style:italic;color:rgb(95,135,135)"># if authentication method isn't accepted the first byte</span>
<span class="ansi-green-fg">    960</span> <span style="font-style:italic;color:rgb(95,135,135)"># will have the octet 254</span>
<span class="ansi-green-fg">    961</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> auth_packet<span style="color:rgb(98,98,98)">.</span>is_auth_switch_request():

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\connections.py:775</span>, in <span class="ansi-cyan-fg">Connection._read_packet</span><span class="ansi-blue-fg ansi-bold">(self, packet_type)</span>
<span class="ansi-green-fg">    773</span>     <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_result <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_result<span style="color:rgb(98,98,98)">.</span>unbuffered_active <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>:
<span class="ansi-green-fg">    774</span>         <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_result<span style="color:rgb(98,98,98)">.</span>unbuffered_active <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">False</span>
<span class="ansi-green-fg ansi-bold">--&gt; 775</span>     packet<span style="color:rgb(98,98,98)">.</span>raise_for_error()
<span class="ansi-green-fg">    776</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> packet

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\protocol.py:219</span>, in <span class="ansi-cyan-fg">MysqlPacket.raise_for_error</span><span class="ansi-blue-fg ansi-bold">(self)</span>
<span class="ansi-green-fg">    217</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> DEBUG:
<span class="ansi-green-fg">    218</span>     <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">errno =</span><span style="color:rgb(175,0,0)">"</span>, errno)
<span class="ansi-green-fg ansi-bold">--&gt; 219</span> err<span style="color:rgb(98,98,98)">.</span>raise_mysql_exception(<span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_data)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\pymysql\err.py:150</span>, in <span class="ansi-cyan-fg">raise_mysql_exception</span><span class="ansi-blue-fg ansi-bold">(data)</span>
<span class="ansi-green-fg">    148</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> errorclass <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    149</span>     errorclass <span style="color:rgb(98,98,98)">=</span> InternalError <span style="font-weight:bold;color:rgb(0,135,0)">if</span> errno <span style="color:rgb(98,98,98)">&lt;</span> <span style="color:rgb(98,98,98)">1000</span> <span style="font-weight:bold;color:rgb(0,135,0)">else</span> OperationalError
<span class="ansi-green-fg ansi-bold">--&gt; 150</span> <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> errorclass(errno, errval)

<span class="ansi-red-fg ansi-bold">OperationalError</span>: (pymysql.err.OperationalError) (1045, "Access denied for user 'my_user'@'localhost' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)</pre>
</div>
</div>
</div>
<div id="3e449fe6" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_sqlalchemy <span class="im">import</span> SQLAlchemy</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>app.secret_key <span class="op">=</span> <span class="st">'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Database configuration</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_DATABASE_URI'</span>] <span class="op">=</span> <span class="st">'mysql+pymysql://my_user:password@localhost/my_database'</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable SQLAlchemy logging</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>logging.basicConfig()</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>logging.getLogger(<span class="st">'sqlalchemy.engine'</span>).setLevel(logging.INFO)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> SQLAlchemy(app)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Test database connection</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> app.app_context():</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>        db.engine.<span class="ex">connect</span>()</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Database connection successful!"</span>)</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database connection failed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'my_user'@'localhost' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
 * Serving Flask app '__main__'
 * Debug mode: on</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with watchdog (windowsapi)</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-fg ansi-bold">SystemExit</span><span class="ansi-red-fg ansi-bold">:</span> 1
</pre>
</div>
</div>
</div>
<div id="a9d93432" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_sqlalchemy <span class="im">import</span> SQLAlchemy</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>app.secret_key <span class="op">=</span> <span class="st">'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Database configuration</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_DATABASE_URI'</span>] <span class="op">=</span> <span class="st">'mysql+pymysql://username:password@localhost/db_name'</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable SQLAlchemy logging</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>logging.basicConfig()</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>logging.getLogger(<span class="st">'sqlalchemy.engine'</span>).setLevel(logging.INFO)</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> SQLAlchemy(app)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Test database connection</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> app.app_context():</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>        db.engine.<span class="ex">connect</span>()</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Database connection successful!"</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database connection failed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'username'@'localhost' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
 * Serving Flask app '__main__'
 * Debug mode: on</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with watchdog (windowsapi)</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-fg ansi-bold">SystemExit</span><span class="ansi-red-fg ansi-bold">:</span> 1
</pre>
</div>
</div>
</div>
<div id="8056d2a9" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_sqlalchemy <span class="im">import</span> SQLAlchemy</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>app.secret_key <span class="op">=</span> <span class="st">'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Database configuration</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_DATABASE_URI'</span>] <span class="op">=</span> <span class="st">'mysql+pymysql://username:password@localhost/db_name'</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable SQLAlchemy logging</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>logging.basicConfig()</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>logging.getLogger(<span class="st">'sqlalchemy.engine'</span>).setLevel(logging.INFO)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> SQLAlchemy(app)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Test database connection</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> app.app_context():</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>        db.engine.<span class="ex">connect</span>()</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Database connection successful!"</span>)</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database connection failed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'username'@'localhost' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
 * Serving Flask app '__main__'
 * Debug mode: on</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with watchdog (windowsapi)</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-fg ansi-bold">SystemExit</span><span class="ansi-red-fg ansi-bold">:</span> 1
</pre>
</div>
</div>
</div>
<div id="b1fc12f6" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask_sqlalchemy <span class="im">import</span> SQLAlchemy</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>app.secret_key <span class="op">=</span> <span class="st">'f8e323875a6103f71c9705a03f5f6fc2698a33e1894c1de6'</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Database configuration</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_DATABASE_URI'</span>] <span class="op">=</span> <span class="st">'mysql+pymysql://username:password@localhost/frenchwithkunal'</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>app.config[<span class="st">'SQLALCHEMY_TRACK_MODIFICATIONS'</span>] <span class="op">=</span> <span class="va">False</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable SQLAlchemy logging</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>logging.basicConfig()</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>logging.getLogger(<span class="st">'sqlalchemy.engine'</span>).setLevel(logging.INFO)</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>db <span class="op">=</span> SQLAlchemy(app)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Test database connection</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> app.app_context():</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>        db.engine.<span class="ex">connect</span>()</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Database connection successful!"</span>)</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Database connection failed: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the application</span></span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Database connection failed: (pymysql.err.OperationalError) (1045, "Access denied for user 'username'@'localhost' (using password: YES)")
(Background on this error at: https://sqlalche.me/e/20/e3q8)
 * Serving Flask app '__main__'
 * Debug mode: on</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>INFO:werkzeug:WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5000
INFO:werkzeug:Press CTRL+C to quit
INFO:werkzeug: * Restarting with watchdog (windowsapi)</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre>An exception has occurred, use %tb to see the full traceback.

<span class="ansi-red-fg ansi-bold">SystemExit</span><span class="ansi-red-fg ansi-bold">:</span> 1
</pre>
</div>
</div>
</div>
<div id="fbbac27c" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>tb</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">SystemExit</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[13], line 28</span>
<span class="ansi-green-fg">     26</span> <span style="font-style:italic;color:rgb(95,135,135)"># Run the application</span>
<span class="ansi-green-fg">     27</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,0,135)">__name__</span> <span style="color:rgb(98,98,98)">==</span> <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">__main__</span><span style="color:rgb(175,0,0)">'</span>:
<span class="ansi-green-fg ansi-bold">---&gt; 28</span>     app<span style="color:rgb(98,98,98)">.</span>run(debug<span style="color:rgb(98,98,98)">=</span><span style="font-weight:bold;color:rgb(0,135,0)">True</span>)

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\flask\app.py:662</span>, in <span class="ansi-cyan-fg">Flask.run</span><span class="ansi-blue-fg ansi-bold">(self, host, port, debug, load_dotenv, **options)</span>
<span class="ansi-green-fg">    659</span> <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">werkzeug</span><span style="font-weight:bold;color:rgb(0,0,255)">.</span><span style="font-weight:bold;color:rgb(0,0,255)">serving</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> run_simple
<span class="ansi-green-fg">    661</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 662</span>     run_simple(t<span style="color:rgb(98,98,98)">.</span>cast(<span style="color:rgb(0,135,0)">str</span>, host), port, <span style="color:rgb(0,135,0)">self</span>, <span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>options)
<span class="ansi-green-fg">    663</span> <span style="font-weight:bold;color:rgb(0,135,0)">finally</span>:
<span class="ansi-green-fg">    664</span>     <span style="font-style:italic;color:rgb(95,135,135)"># reset the first request information if the development server</span>
<span class="ansi-green-fg">    665</span>     <span style="font-style:italic;color:rgb(95,135,135)"># reset normally.  This makes it possible to restart the server</span>
<span class="ansi-green-fg">    666</span>     <span style="font-style:italic;color:rgb(95,135,135)"># without reloader and that stuff from an interactive shell.</span>
<span class="ansi-green-fg">    667</span>     <span style="color:rgb(0,135,0)">self</span><span style="color:rgb(98,98,98)">.</span>_got_first_request <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">False</span>

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\werkzeug\serving.py:1115</span>, in <span class="ansi-cyan-fg">run_simple</span><span class="ansi-blue-fg ansi-bold">(hostname, port, application, use_reloader, use_debugger, use_evalex, extra_files, exclude_patterns, reloader_interval, reloader_type, threaded, processes, request_handler, static_files, passthrough_errors, ssl_context)</span>
<span class="ansi-green-fg">   1112</span> <span style="font-weight:bold;color:rgb(0,135,0)">from</span> <span style="font-weight:bold;color:rgb(0,0,255)">.</span><span style="font-weight:bold;color:rgb(0,0,255)">_reloader</span> <span style="font-weight:bold;color:rgb(0,135,0)">import</span> run_with_reloader
<span class="ansi-green-fg">   1114</span> <span style="font-weight:bold;color:rgb(0,135,0)">try</span>:
<span class="ansi-green-fg ansi-bold">-&gt; 1115</span>     run_with_reloader(
<span class="ansi-green-fg">   1116</span>         srv<span style="color:rgb(98,98,98)">.</span>serve_forever,
<span class="ansi-green-fg">   1117</span>         extra_files<span style="color:rgb(98,98,98)">=</span>extra_files,
<span class="ansi-green-fg">   1118</span>         exclude_patterns<span style="color:rgb(98,98,98)">=</span>exclude_patterns,
<span class="ansi-green-fg">   1119</span>         interval<span style="color:rgb(98,98,98)">=</span>reloader_interval,
<span class="ansi-green-fg">   1120</span>         reloader_type<span style="color:rgb(98,98,98)">=</span>reloader_type,
<span class="ansi-green-fg">   1121</span>     )
<span class="ansi-green-fg">   1122</span> <span style="font-weight:bold;color:rgb(0,135,0)">finally</span>:
<span class="ansi-green-fg">   1123</span>     srv<span style="color:rgb(98,98,98)">.</span>server_close()

File <span class="ansi-green-fg ansi-bold">~\anaconda3\Lib\site-packages\werkzeug\_reloader.py:469</span>, in <span class="ansi-cyan-fg">run_with_reloader</span><span class="ansi-blue-fg ansi-bold">(main_func, extra_files, exclude_patterns, interval, reloader_type)</span>
<span class="ansi-green-fg">    467</span>             reloader<span style="color:rgb(98,98,98)">.</span>run()
<span class="ansi-green-fg">    468</span>     <span style="font-weight:bold;color:rgb(0,135,0)">else</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 469</span>         sys<span style="color:rgb(98,98,98)">.</span>exit(reloader<span style="color:rgb(98,98,98)">.</span>restart_with_reloader())
<span class="ansi-green-fg">    470</span> <span style="font-weight:bold;color:rgb(0,135,0)">except</span> <span style="font-weight:bold;color:rgb(215,95,95)">KeyboardInterrupt</span>:
<span class="ansi-green-fg">    471</span>     <span style="font-weight:bold;color:rgb(0,135,0)">pass</span>

<span class="ansi-red-fg ansi-bold">SystemExit</span>: 1</pre>
</div>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/frenchwithkunal\.ca");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./ethics.html">
<p>Ethics</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="./policy.html">
<p>Privacy policy</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="./terms.html">
<p>Terms of Service</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
<p><span class="citation" data-cites="2025">@2025</span> French with Kunal <br> All rights reserved. <br></p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="https://frenchwithkunal.ca/index.html">
<p>English</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://frenchwithkunal.ca/fr/index.html">
<p>French</p>
</a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:info@frenchwithkunal.ca">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@kunalkhurana7822">
      <i class="bi bi-youtube" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>